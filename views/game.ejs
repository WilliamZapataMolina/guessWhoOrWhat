<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Guess Who? / What?</title>
    <link rel="stylesheet" href="thirdparty/bootstrap-5.3.3-dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="/css/navbar.css">
    <link rel="stylesheet" href="/css/game.css">
    <link rel="stylesheet" href="/css/chat.css ">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
    
</head>
<body>
    <%- include('parts/navbar', { user: user }) %>
    
  <audio id="turn-sound" src="/audio/sound-1-167181.mp3" preload="auto"></audio>
  
    <main class="game-main">
        <section id="lobby-section" class="game-section">
            <h2>Lobby de Juego</h2>
            <div class="lobby-controls">
                <input type="text" id="roomIdInput" placeholder="ID de la Sala" required>
                <button id="createRoomBtn">Crear Sala</button>
                <button id="joinRoomBtn">Unirse a Sala</button>
            </div>
            <p id="roomMessages"></p>
            <ul id="playerList">
                </ul>
        </section>

        <section id="gameSetup" class="game-section" style="display: none;">
            <h2>Selecciona una Categoría</h2>
            <div class="game-options">
        <input type="checkbox" id="enableTimerCheckbox">
        <label for="enableTimerCheckbox">Habilitar temporizador (30 segundos)</label>
            </div>
            <div id="categoryCheckboxes" class="category-grid">
                </div>
            <button id="startGameBtn" style="display: none;">Iniciar Juego</button>
            <div id="waitingForHostMessage" style="display: none;"> <p>¡Sala lista! Esperando que el anfitrión elija categorías e inicie el juego...</p>
            </div>
        </section>
        <section id="characterSelection" class="game-section" style="display: none;">
    <h2>Elige tu Personaje Secreto</h2>
    <p>Selecciona el personaje que tu oponente tendrá que adivinar.</p>
    <div id="secretCharacterSelectionGrid" class="character-grid">
        </div>
    <button id="confirmSecretCharacterBtn" style="display: none;">Confirmar Personaje</button>
    <p id="secretSelectionMessage"></p>
</section>

        <section id="gameBoard" class="game-section" style="display: none;">
            <h2>Personaje Secreto</h2>
            <div class="secret-character-area">
            <div id="secretCharacterDisplay" class="secret-character-card">
                </div>
                <div id="secretCharacterDescription" class="secret-character-description">
            <p>Descripción del personaje aparecerá aquí.</p>
        </div>
            </div>

            <h2>Tablero de Juego</h2>
            <div id="gameBoardContent" class="character-grid">
                </div>

            <div class="game-controls">
                <p id="turnIndicator">Esperando turno...</p> 
                
                <div id="timerDisplay"></div> 
                
                <p id="gameStatusMessage"></p> 
                <div class="questions-section">
                    <h3>Haz una Pregunta:</h3>
                    <div id="attributeQuestions">
                        </div>
                </div>

                <div class="guess-section">
                    <h3>¿Quién es?</h3>
                    <input type="text" id="guessedCharacterInput" placeholder="ID del personaje a adivinar" class="guess-input">
                    <button id="guessCharacterBtn">¡Adivinar!</button>
                     <button id="resetGameBtn" style="display:none;">Reiniciar Juego</button>
                </div>
            </div>
        </section>
        <button id="chatIcon" class="chat-icon">
            <i class="fas fa-comments"></i>
        </button>

                <div id="chatModal" class="chat-modal-content">
                   <div class="chat-header">
                    <span class="chat-title">Chat de la Sala</span>
                    <button id="closeChatBtn" class="close-chat-btn">&times;</button>
                </div>
                <div id="chatMessages" class="chat-messages">
                                    </div>
                <form id="chatForm" class="chat-input-form">
                    <input type="text" id="chatInput" placeholder="Escribe un mensaje..." autocomplete="off">
                    <button type="submit" class="send-btn">Enviar</button>
                </form>
        </div>
    </main>
   
    <script src="/socket.io/socket.io.js"></script>
    <script src="js/game.js"></script>
    <script src="js/questions.js"></script>
    <script src="js/chat.js"></script>
</body>
</html>